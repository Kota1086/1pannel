<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WhatsApp Emoji Dot Art Composer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Fira Code', monospace;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #e0ffe0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }
    
    .app-box {
      background: rgba(22, 22, 22, 0.9);
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(0, 255, 170, 0.6);
      padding: 30px;
      max-width: 900px;
      width: 100%;
      text-align: center;
      border: 1px solid #00ffcc;
      position: relative;
      overflow: hidden;
    }
    
    .app-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(to right, #00ffcc, #00ffaa, #00ff88);
    }
    
    h1 {
      color: #00ffcc;
      font-size: 2rem;
      margin-bottom: 25px;
      text-shadow: 0 0 10px rgba(0, 255, 204, 0.5);
    }
    
    .subtitle {
      color: #77ffcc;
      font-size: 1rem;
      margin-bottom: 25px;
    }
    
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-bottom: 25px;
    }
    
    .control-group {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      background: rgba(40, 40, 40, 0.7);
      padding: 15px;
      border-radius: 12px;
      width: 100%;
      max-width: 400px;
    }
    
    .control-group label {
      color: #00ffaa;
      margin-bottom: 8px;
      font-size: 0.9rem;
    }
    
    input, select, button {
      padding: 12px 15px;
      border-radius: 8px;
      border: none;
      background: #222;
      color: #0f0;
      font-size: 1rem;
      font-family: 'Fira Code', monospace;
      width: 100%;
      transition: all 0.3s;
    }
    
    input:focus, select:focus {
      outline: 2px solid #00ffcc;
      box-shadow: 0 0 15px rgba(0, 255, 170, 0.4);
    }
    
    button {
      cursor: pointer;
      background: linear-gradient(to right, #0072ff, #00c6ff);
      color: white;
      font-weight: bold;
      letter-spacing: 1px;
      padding: 14px 20px;
      margin-top: 5px;
      flex: 1;
      min-width: 180px;
    }
    
    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 198, 255, 0.4);
    }
    
    button:active {
      transform: translateY(1px);
    }
    
    #copyBtn {
      background: linear-gradient(to right, #00c853, #64dd17);
    }
    
    .output-container {
      position: relative;
      margin: 25px 0;
    }
    
    .output-box {
      background: #000;
      border-radius: 12px;
      padding: 25px;
      overflow-x: auto;
      white-space: pre;
      font-size: 13px;
      line-height: 1.2;
      color: #33ff99;
      box-shadow: inset 0 0 15px rgba(0, 255, 153, 0.5);
      max-height: 60vh;
      min-height: 250px;
      text-align: left;
      font-family: 'Fira Code', monospace;
      border: 1px solid #00ffaa;
    }
    
    canvas {
      display: none;
    }
    
    .footer {
      margin-top: 25px;
      font-size: 0.8rem;
      color: #77a;
      padding-top: 15px;
      border-top: 1px solid #334;
    }
    
    .instructions {
      background: rgba(30, 40, 60, 0.7);
      border-radius: 12px;
      padding: 15px;
      margin: 20px 0;
      text-align: left;
      font-size: 0.9rem;
    }
    
    .instructions h3 {
      color: #00ffcc;
      margin-bottom: 10px;
    }
    
    .instructions ul {
      padding-left: 20px;
    }
    
    .instructions li {
      margin-bottom: 8px;
      color: #aaffdd;
    }
    
    .success-message {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 200, 83, 0.9);
      color: white;
      padding: 15px 30px;
      border-radius: 8px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      font-weight: bold;
      z-index: 1000;
      display: none;
    }
    
    @media (max-width: 768px) {
      .controls {
        flex-direction: column;
        align-items: center;
      }
      
      .control-group {
        max-width: 100%;
      }
      
      h1 {
        font-size: 1.6rem;
      }
      
      .output-box {
        padding: 15px;
        font-size: 11px;
      }
    }
  </style>
</head>
<body>
  <div class="app-box">
    <h1>âœ¨ WhatsApp Emoji Dot Art Composer</h1>
    <p class="subtitle">Generates WhatsApp-friendly emoji art that preserves formatting</p>
    
    <div class="controls">
      <div class="control-group">
        <label for="emojiInput">Enter Emoji</label>
        <input id="emojiInput" value="ðŸ¥¹" maxlength="2" placeholder="Enter Emoji">
      </div>
      
      <div class="control-group">
        <label for="modeSelect">AI Processing Mode</label>
        <select id="modeSelect">
          <option value="ai-ultra">AI Ultra Detail</option>
          <option value="ai-smart">AI Smart Fill</option>
          <option value="ai-edge">AI Sharp Edge</option>
          <option value="ai-contrast">AI Contrast Enhance</option>
          <option value="ai-face">AI Face Map</option>
          <option value="ai-outline">AI Outline</option>
          <option value="ai-depth">AI Depth</option>
          <option value="ai-pixel">AI Pixel Clean</option>
          <option value="ai-hybrid">AI Hybrid FX</option>
          <option value="ai-simplified">AI Simplified</option>
        </select>
      </div>
    </div>
    
    <div class="controls">
      <button id="generateBtn" onclick="generateArt()">ðŸŽ¨ Generate Art</button>
      <button id="copyBtn" onclick="copyToClipboard()">ðŸ“‹ Copy for WhatsApp</button>
    </div>
    
    <div class="instructions">
      <h3>How to use in WhatsApp:</h3>
      <ul>
        <li>Generate your emoji art</li>
        <li>Click "Copy for WhatsApp" button</li>
        <li>Paste directly into WhatsApp chat</li>
        <li>The art will maintain its formatting</li>
        <li>Works best with monospace fonts</li>
      </ul>
    </div>
    
    <div class="output-container">
      <div class="output-box" id="dotOutput"></div>
    </div>
    
    <canvas id="emojiCanvas"></canvas>
    
    <div class="footer">
      <p>Â© 2023 WhatsApp Dot Art Generator | Fixed formatting for WhatsApp</p>
      <p>Works perfectly with all messaging platforms</p>
    </div>
  </div>
  
  <div class="success-message" id="successMessage">âœ… Copied to clipboard! Ready for WhatsApp</div>

  <script>
    function getCanvasSize(platform) {
      // WhatsApp requires specific formatting to preserve layout
      const sizes = { 
        whatsapp: 38, 
        instagram: 45, 
        facebook: 42, 
        tiktok: 48, 
        default: 40 
      };
      return sizes[platform] || sizes.default;
    }
    
    function generateArt() {
      const emoji = document.getElementById("emojiInput").value || "ðŸ¥¹";
      const mode = document.getElementById("modeSelect").value;
      const platform = "whatsapp"; // Force WhatsApp optimization
      const size = getCanvasSize(platform);
      
      const canvas = document.getElementById("emojiCanvas"); 
      canvas.width = canvas.height = size;
      
      const ctx = canvas.getContext("2d");
      ctx.clearRect(0, 0, size, size);
      ctx.font = `${Math.floor(size * 0.8)}px serif`;
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.fillText(emoji, size / 2, size / 2);
      
      const imgData = ctx.getImageData(0, 0, size, size);
      const { data, width, height } = imgData;
      
      let art = "";
      
      function alpha(x,y) { 
        return (x < 0 || y < 0 || x >= width || y >= height) ? 0 : data[(y * width + x) * 4 + 3]; 
      }
      
      function bright(x,y) { 
        const i = (y * width + x) * 4; 
        return (data[i] + data[i+1] + data[i+2]) / 3; 
      }
      
      function edge(x,y) { 
        return [alpha(x+1,y), alpha(x-1,y), alpha(x,y+1), alpha(x,y-1)].some(v => v < 50); 
      }
      
      // WhatsApp-optimized generation with proper line breaks
      for(let y = 0; y < height; y += 2) { 
        for(let x = 0; x < width; x++) { 
          const a = alpha(x,y);
          const b = bright(x,y);
          
          if(a < 50) { 
            art += " "; 
            continue;
          }
          
          switch(mode) {
            case 'ai-ultra': art += (b < 80 ? ' ' : '*'); break;
            case 'ai-smart': art += (b > 200 ? ' ' : (b > 130 ? '.' : '*')); break;
            case 'ai-edge': art += edge(x,y) ? '#' : ' '; break;
            case 'ai-contrast': art += (b < 100 ? '*' : (b < 180 ? '+' : '.')); break;
            case 'ai-face': art += (b > 230 || a < 180 ? ' ' : '#'); break;
            case 'ai-outline': art += (edge(x,y) && b < 200 ? '#' : ' '); break;
            case 'ai-depth': art += (b > 240 ? ' ' : (b > 170 ? '.' : (b > 100 ? '*' : '@'))); break;
            case 'ai-pixel': art += (b > 200 ? 'Â·' : (b > 150 ? '.' : ' ')); break;
            case 'ai-hybrid': art += edge(x,y) ? '#' : (b > 220 ? '.' : (b > 140 ? '*' : ' ')); break;
            case 'ai-simplified': art += (b > 180 ? 'Â·' : '.'); break;
            default: art += '.';
          }
        } 
        art += "\n"; 
      }
      
      document.getElementById("dotOutput").textContent = art;
    }
    
    function copyToClipboard() {
      let text = document.getElementById("dotOutput").textContent;
      
      // WhatsApp formatting fix:
      // 1. Use non-breaking spaces for consistent spacing
      // 2. Add borders for better visual separation
      text = text.replace(/ /g, '\u00A0'); // Non-breaking space
      
      // Add decorative borders
      const border = 'â–°'.repeat(40);
      text = `${border}\n${text}\n${border}`;
      
      // Copy to clipboard
      navigator.clipboard.writeText(text).then(() => {
        const message = document.getElementById("successMessage");
        message.style.display = 'block';
        setTimeout(() => {
          message.style.display = 'none';
        }, 3000);
      });
    }
    
    // Initialize on load
    window.onload = function() {
      generateArt();
      
      // Add event listeners for better UX
      document.getElementById('emojiInput').addEventListener('input', generateArt);
      document.getElementById('modeSelect').addEventListener('change', generateArt);
    };
  </script>
</body>
</html>